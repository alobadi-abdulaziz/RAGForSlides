Lecture 10 Files: Reading and Writing 

                    1 
<<<

References & Reading 

   The content is mainly selected (sometimes modified) from the original 
   slides provided by the authors of the textbook 

  · Readings 
      Chapter 15: Files, Streams and Object Serialization 

                                                                      2 
<<<

15.1 Introduction 

  · Data stored in variables and arrays is temporary 
      It's lost when a local variable goes out of scope or when the program 
      terminates 
   For long-term retention of data, computers use files. 
   Computers store files on secondary storage devices 
      hard disks, flash drives, DVDs and more. 
   Data maintained in files is persistent data because it exists beyond 
   the duration of program execution. 

                                                                     3 
<<<

15.2 Files and Streams 

· Java views each file as a sequential stream of bytes (Fig. 15.1). 

 Every operating system provides a mechanism to determine the end of a 
 file, such as an end-of-file marker or a count of the total bytes in the file 
 that is recorded in a system-maintained administrative data structure. 
 
 A Java program simply receives an indication from the operating system 
 when it reaches the end of the stream 


                                                                           4 
<<<

15.2 Files and Streams (cont.) 

   File streams can be used to input and output data as bytes 
   or characters. 
     " Byte-based streams output and input data in its binary format-a 
      char is two bytes, an int is four bytes, a double is eight bytes, 
      etc. 
      Character-based streams output and input data as a sequence of 
      characters in which every character is two bytes-the number of 
      bytes for a given value depends on the number of characters in that 
      value. 
  · Files created using byte-based streams are referred to as 
   binary files. 
  . Files created using character-based streams are referred to 
   as text files. Text files can be read by text editors. 
  . Binary files are read by programs that understand the 
   specific content of the file and the ordering of that content. 

                                                                   5 
<<<

15.2 Files and Streams (cont.) 

 . A Java program opens a file by creating an object and 
   associating a stream of bytes or characters with it. 
      Can also associate streams with different devices. 
   Java creates three stream objects when a program begins 
   executing 
    "System. in (standard input stream) object normally inputs bytes 
      from the keyboard 
    "Object System. out (the standard output stream object) 
     normally outputs character data to the screen 
      Object System. err (the standard error stream object) normally 
      outputs character-based error messages to the screen. 

                                                                6 
<<<

15.2 Files and Streams (cont.) 

   Java programs perform file processing by using classes from package 
   java. io and the subpackages of java. nio. 
   Character-based input and output can be performed with classes 
   Scanner and Formatter. 
      Class Scanner is used extensively to input data from the keyboard. This 
      class can also read data from a file. 
      Class Formatter enables formatted data to be output to any text-based 
      stream in a manner similar to method System.out.printf. 

                                                                      7 
<<<

15.4 Sequential-Access Text Files 

   Sequential-access files store records in order by the record-key field. 
   Text files are human-readable files. 

                                                                    8 
<<<

 15.4.1 Creating a Sequential-Access Text File 

  · Java imposes no structure on a file 
       Notions such as records do not exist as part of the Java language. 
       You must structure files to meet the requirements of your applications. 

                                                                        9 
<<<

15.4.1 Creating a Sequential-Access Text File (cont.) 

    Formatter outputs formatted Strings to the specified stream. 
  . The constructor with one String argument receives the name of the 
   file, including its path. 
     " If a path is not specified, the JVM assumes that the file is in the directory 
      from which the program was executed. 
  . If the file does not exist, it will be created. 
  · If an existing file is opened, its contents are truncated. 

                                                                            10 
<<<

1. import java. util. Scanner; 
2. import java. util . Formatter; 
3. public class ex1{ 
4. public static void main(String [] args) throws Exception 
5. 
      { 
6.      Formatter output=new Formatter("clients. txt"); 
7.      Scanner input=new Scanner(System. in); 
8.      System. out. println( "Enter account number, First name, Last name and Balance. "); 
9.      System. out. println( "Enter EOF End-of-File Mark to stop. "); 
10.    while(input. hasNext () ) 
11.    { 
12.     int account_num=input. nextInt(); 
13.     String Fname=input. next(); 
14.     String Lname=input. next(); 
15.     double balance=input.nextDouble(); 
16. 
        output . format ("%d %s %s %f %n", account_num, Fname, Lname, balance); 
17. 
        System. out. println( "Enter account number, First name, Last name and Balance. "); 
18.     System. out. println( "Enter EOF End-of-File Mark to stop. "); 
19.    } 
20.    if(output != null) 
21.    output. close(); 
22.   } 
23. } 

                                                                                    11 
<<<

  Sample Run Showing Data Entered by the User 

Enter account number, First name, Last name and Balance. 
Enter EOF End-of-File Mark to stop. 
1122 Mohammed Ali 8000.98 
?1133 Sarah Ahmed 9877.7 
?1144 Nasser Salah 9886.435 
? 

                         Output to the File 
                clients.txt  

                clients.txt 
                1   1122 Mohammed Ali 8000.98 
                2   1133 Sarah Ahmed 9877.70 
                3   1144 Nasser Salah 9886.44 
                4 

                                                              12 
<<<

15.4.1 Creating a Sequential-Access Text File (cont.) 

   An Exception occurs when there are an error while executing the 
  program: 
    if the user does not have permission to write data to the 
     file. 
    if the file does not exist and a new file cannot be created. 
     if the data being read by a Scanner method is in the 
     wrong format or if there is no more data to input. 
    if the Formatter is closed when you attempt to output 

                                                              13 
<<<

15.4.1 Creating a Sequential-Access Text File (cont.) 

 . Scanner method hasNext determines whether the end- 
  of-file key combination has been entered. 
   Formatter method format works like 
  System.out. printf 
   Formatter method close closes the file. 
     If method close is not called explicitly, the operating system 
     normally will close the file when program execution terminates. 

                                                             14 
<<<

15.4.2 Reading Data from a Sequential-Access Text File 

   The application (Fig. 15.6) reads records from the file 
   "clients.txt" created by the application of Section 15.4.1 and 
  displays the record contents. 

                                                             15 
<<<

1. import java. nio. file. Paths; 
2. import java. util. Scanner; 
   public class ex1{ 
3. public static void main(String [ ] args) throws Exception 
4. 
     { 
5.     Scanner input=new Scanner (Paths.get("clients. txt") ); 
6.     System. out. printf( "%10s %10s %10s %10s %n", "Account", "First", 
   "Last", "Balance"); 
7. 
8.     while( input . hasNext ( ) ) 
9.     { 
10.      int account_num=input. nextInt(); 
11.      String Fname=input.next(); 
12.      String Lname=input. next(); 
13.      double balance=input.nextDouble (); 
14. 
       System. out. printf("%10d %10s %10s %10.2f %n", account_num, Fname, 
   Lname, balance) ; 
15.   } 
16. 
17. if(input != null) 
18.   input. close(); 
19. } 
20.}                                                                     16 
<<<

        Input from the File 
clients.txt  

 clients.txt 
1   1122 Mohammed Ali 8000.98 
2   1133 Sarah Ahmed 9877.70 
3   1144 Nasser Salah 9886.44 
4 

        Sample Run Showing Data Reading from the File 
        
         Account      First       Last    Balance 
            1122   Mohammed        Ali    8000.98 
            1133      Sarah      Ahmed    9877.70 
            1144     Nasser      Salah    9886.44 

                                                       17 
<<<